# Education Connect - 测试服务器使用说明

## 🚀 **快速启动指南**

### **最简启动（推荐）**
```bash
# 方式一：分别启动
终端1: cd trip-manager/backend && node simple-server.js    # 后端服务
终端2: cd trip-manager/frontend && npm run dev             # 前端服务

# 方式二：使用Claude自定义命令
/start-project
```

启动完成后访问：**http://localhost:5173**

---

## 📋 **服务端口说明**

| 服务 | 端口 | 状态 | 说明 |
|------|------|------|------|
| **前端服务** | :5173 | ✅ 必需 | Vite开发服务器，用户访问入口 |
| **后端服务** | :3001 | ✅ 必需 | API服务器，处理所有数据请求 |
| ~~V2后端服务~~ | ~~:3002~~ | ❌ 可选 | 独立V2后端（通常不需要） |

**重要**：只需要前两个服务即可完整测试V1和V2所有功能！

---

## 🎯 **功能测试入口**

### **V1功能（稳定版）**
```
🏠 首页日历视图：    http://localhost:5173/
👥 团组管理：        http://localhost:5173/groups
🎨 行程设计器：      http://localhost:5173/designer
📍 行程资源管理：    http://localhost:5173/locations
📊 统计报表：        http://localhost:5173/statistics
```

### **V2功能（开发版）**
```
👥 团组管理V2：      http://localhost:5173/groups/v2
✏️ 编辑团组V2：      http://localhost:5173/groups/v2/edit/1
➕ 新建团组V2：      http://localhost:5173/groups/v2/new
```

---

## 🔧 **常见问题排查**

### **问题1：端口被占用**
```bash
# 检查端口占用
lsof -i :5173    # 前端端口
lsof -i :3001    # 后端端口

# 终止占用进程
kill -9 <PID>
```

### **问题2：API请求失败**
```bash
# 检查后端服务状态
curl http://localhost:3001/api/groups

# 预期响应：JSON格式的团组列表
```

### **问题3：前端无法访问**
```bash
# 检查Vite服务状态
curl http://localhost:5173

# 预期响应：HTML页面内容
```

### **问题4：页面显示错误**
1. 检查浏览器控制台错误信息
2. 确认后端服务正常运行
3. 清除浏览器缓存（Ctrl+F5）

---

## 🧪 **测试账号信息**

```
用户名：admin
密码：admin123
```

**注意**：系统使用HTTP基础认证，前端会自动添加认证头。

---

## 📊 **预设测试数据**

### **团组数据（2025年9月）**
```
第一批 (9月12-16日):
1. 深圳实验学校小学部 (小学, 44人)
2. 广州中学 (中学, 38人)
3. 北京师范大学附属小学 (小学, 46人)
4. 上海华东师大二附中 (中学, 41人)

第二批 (9月15-20日):
5. 杭州学军小学 (小学, 40人)
6. 南京师范大学附中 (中学, 44人)
7. 武汉华中师大一附小 (小学, 49人)
```

### **地点资源**
```
1. 香港科学馆 (容量200人，周四不可用)
2. 香港警队博物馆 (容量100人，仅小学团组)
3. 诺亚方舟 (容量150人，周三不可用)
4. 香港海洋公园 (容量500人)
5. 西九文化区 (容量300人)
6. 香港太空馆 (容量100人)
7. 香港大学 (容量150人)
8. 驻港部队展览中心 (容量100人，仅中学团组)
```

---

## 🔄 **V1与V2功能对比测试**

### **建议测试流程**
1. **基础功能测试**
   - 先在V1中熟悉基本操作
   - 添加、编辑、删除团组
   - 查看日历和活动安排

2. **V2增强功能测试**
   - 访问V2团组管理界面
   - 体验新的卡片式布局
   - 测试团组编辑的三部分界面

3. **数据一致性验证**
   - 在V1中添加团组
   - 切换到V2验证数据同步
   - 在V2中修改，回V1检查更新

---

## ⚡ **性能监控**

### **前端性能**
- 页面加载时间：< 2秒
- 路由切换：< 500ms
- API响应：< 1秒

### **后端性能**
- 内存使用：< 100MB
- CPU占用：< 5%（空闲时）
- 并发处理：支持10+并发请求

---

## 🛠️ **开发调试**

### **前端调试**
```bash
# 启用调试模式
cd trip-manager/frontend
npm run dev -- --debug

# 查看详细日志
npm run dev -- --host --port 5173
```

### **后端调试**
```bash
# 启用调试模式
cd trip-manager/backend
DEBUG=* node simple-server.js

# 或者使用nodemon自动重启
npm install -g nodemon
nodemon simple-server.js
```

### **网络调试**
```bash
# 检查API请求
curl -X GET http://localhost:3001/api/groups \
  -H "Authorization: Basic YWRtaW46YWRtaW4xMjM="

# 添加新团组
curl -X POST http://localhost:3001/api/groups \
  -H "Content-Type: application/json" \
  -H "Authorization: Basic YWRtaW46YWRtaW4xMjM=" \
  -d '{"name":"测试团组","type":"primary","student_count":30}'
```

---

## 📝 **日志文件位置**

```
前端日志：浏览器控制台
后端日志：终端输出
错误日志：自动显示在对应终端
```

---

## 🔄 **服务重启步骤**

### **完全重启**
```bash
# 1. 停止所有服务
Ctrl+C (在各个终端)

# 2. 清理端口（如果需要）
lsof -ti:5173 | xargs kill -9
lsof -ti:3001 | xargs kill -9

# 3. 重新启动
cd trip-manager/backend && node simple-server.js
cd trip-manager/frontend && npm run dev
```

### **快速重启**
```bash
# 只需要在对应终端按 Ctrl+C 后重新运行启动命令
```

---

## 🆘 **技术支持**

### **常用命令**
```bash
/help              # 获取帮助
/check-system      # 检查系统状态
/add-group         # 快速添加团组
/start-project     # 启动项目服务
```

### **文档参考**
- 项目架构：`项目架构和运行原理详解.md`
- 技术文档：`CLAUDE.md`
- 前后端交互：`项目前后端交互详解.md`

---

## ✅ **测试完成检查清单**

- [ ] 前端服务启动成功 (localhost:5173)
- [ ] 后端服务启动成功 (localhost:3001)
- [ ] V1功能正常访问
- [ ] V2功能正常访问
- [ ] 数据增删改查正常
- [ ] V1和V2数据同步正常
- [ ] 无控制台错误信息
- [ ] 页面响应速度正常

---

*最后更新：2025年1月*
*适用版本：V1.8过渡期*
# 行程设计器团组行对齐优化

## 背景与问题
- 当同一时段有多个团组时，为了方便跨天对齐观察，系统会将同名团组固定到同一行。
- 这种对齐会在某些日期产生“空行”，影响紧凑度。

## 目标
- **保留对齐能力**：同名团组跨天保持在同一行（便于横向对比）。
- **提供紧凑模式**：一键切换为“只显示当天有安排的团组”，减少空行。
- **视觉优化空行**：对齐模式下空行变淡、以细线提示存在，降低噪音。

## 方案说明
### 1) 对齐模式（默认开启）
- 行程格内“行序”基于整个时间段的团组集合。
- 若某天没有该团组，则该行显示为空行。
- 空行以淡色细线占位，不再显著占用视觉注意力。

### 2) 紧凑模式
- 仅渲染当天实际出现的团组行。
- 同名团组跨天不再严格固定在同一行。
- 适合希望密度更高、减少空行的场景。

## 使用方式
在行程设计器顶部工具区新增开关：
- **对齐团组行**（带提示：同名团组跨天固定在同一行，可能出现空行）
  - 开启：对齐模式
  - 关闭：紧凑模式

开关状态全局保存于系统配置，并在前端做本地缓存：
- system_config key：`itinerary_group_row_align`
- `localStorage` key：`itinerary_group_row_align`

## 相关文件
- `trip-manager/frontend/src/pages/ItineraryDesigner.jsx`
  - 新增状态 `alignGroupRows`
  - 新增开关 `对齐团组行`
  - 渲染逻辑支持对齐/紧凑两种行生成方式
- `trip-manager/frontend/src/pages/ItineraryDesigner.css`
  - 对齐模式空行样式淡化、细线占位

## 可选后续优化
- 支持“默认模式”配置（系统级设置）
- 空行高度进一步压缩
- 将开关放入“设置面板”以减少工具条拥挤
